<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <script type="importmap">
    {
      "imports": {
        "chart.js": "https://esm.sh/chart.js@4.4.1/auto"
      }
    }
  </script>
</head>
<body>
  <div class="app-root">
    <div class="top-section">
      <section class="table-section">
        <div class="section-header">
          <span>–û–ø–µ—Ä–∞—Ü–∏–∏</span>
          <div class="header-controls">
            <button id="upload-csv-btn" type="button" onclick="startCsvUpload()" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å CSV" aria-label="–ó–∞–≥—Ä—É–∑–∏—Ç—å CSV">–ó–∞–≥—Ä—É–∑–∏—Ç—å CSV</button>
            <button id="download-csv-btn" type="button" onclick="downloadOperationsCsv()" title="–°–∫–∞—á–∞—Ç—å CSV –æ–ø–µ—Ä–∞—Ü–∏–π" aria-label="–°–∫–∞—á–∞—Ç—å CSV –æ–ø–µ—Ä–∞—Ü–∏–π">–°–∫–∞—á–∞—Ç—å CSV</button>
          </div>
          <div class="header-controls" style="margin-left:8px;">
            <input id="category-search" type="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" aria-label="–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" />
          </div>
        </div>
        <div class="table-wrapper">
          <table class="ops-table">
            <thead>
              <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–°–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</th>
                <th>–ë–∞–ª–∞–Ω—Å</th>
              </tr>
            </thead>
            <tbody id="operations-body">
              <!-- rows injected by JS -->
            </tbody>
          </table>
        </div>
      </section>

      <section class="analytics-section">
        <div class="section-header analytics-header">
          <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∞</span>
          <div class="notif-wrap">
            <button id="notif-bell" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">üîî</button>
            <div id="notif-list" class="notif-list" hidden></div>
          </div>
          <div style="margin-left:8px;">
            <select id="analytics-category" aria-label="–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
              <option value="__all__">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            </select>
          </div>
          <div class="period-controls">
            <input type="date" id="date-from" />
            <span class="dash">‚Äì</span>
            <input type="date" id="date-to" />
          </div>
        </div>

        <div class="chart-container">
          <canvas id="balance-chart"></canvas>
        </div>

        <div class="period-ops">
          <div class="period-ops-header">
            <span>–û–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥</span>
            <span id="period-summary" class="period-summary"></span>
          </div>
          <ul id="period-ops-list" class="period-ops-list">
            <!-- items injected by JS -->
          </ul>
        </div>
      </section>
    </div>

    <section class="analysis-section">
      <div class="section-header">
        <span>–ê–Ω–∞–ª–∏–∑ –±—é–¥–∂–µ—Ç–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</span>
      </div>
      <div id="analysis-content" class="analysis-content">
        <!-- analysis text injected by JS -->
      </div>
    </section>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>